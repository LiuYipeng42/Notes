## 内部类

### 作用：

1. 内部类方法可以**访问该类定义所在的作用域中的数据**，包括私有的数据。
2. 内部类可以**对同一个包中的其他类隐藏**起来。
3. 当想要定义一个回调函数且不想编写大量代码时，使用**匿名（anonymous）内部类**比较便捷。



### 语法：

1. 内部类既可以访问自身的数据域，也可以**访问**创建它的**外围类对象的数据域**

   ​		这是因为**内部类**的对象总**有一个隐式引用**，它指向了创建它的外部类对象。**外围类的引用在内部类的构造器中设置**。编译器修改了所有的内部类的构造器，添加一个外围类引用的参数，内部类通过这个外围类的引用，访问外围类对象的数据。

2. 外围类的隐式引用为：

   ```java
   OuterClass.this
   ```

   例：

   ​	**从内部类中引用外部类的数据**

   ```java
   OuterClass.this.OuterData
   ```

   这是**完整的写法**，正常情况下只需要写变量名OuterData即可

3. 若内部类是公共的，则对于任意一个外围类的对象都可以**在外围类之外创建一个内部类对象**。

   例：

   ```java
   OuterClass oc = new OuterClass(); 
   OuterClass.InnerClass ic = oc.new InnerClass();
   ```

4. 只有**内部类可以是私有类**，而常规类只可以具有包可见性，或公有可见性。声明为私有类后，只能在外围类内创建内部类对象。
5. 内部类中声明的所有**静态域都必须是final**
6. 内部类**不能有static方法**



### 局部内部类

1. 在**外围类的方法中定义的类**叫做局部内部类

2. 局部类**不能用public 或private**访问说明符进行声明。它的作用域被限定在声明这个局部类的块中。
   局部类有一个优势，即对**外部世界可以完全地隐藏起来**。

3. 局部内部类可以**使用局部变量**（参数变量等），在程序执行时，使用的局部变量会被储存为一个常量，所在方法运行结束后此变量还能用，并不会因为局部变量的消失（因为为局部变量，当参数所在的方法运行结束后，局部变量就消失了）而导致所创建出来的局部内部类的对象无法使用。这些**局部变量必须为final**，若想让此局部变量改变，可以利用数组，因为即使是**被final修饰的数组**，数组中储存的值也是可以改变的。因为final限制的是引用所指向的内存（数组）不变，而数组的数可以变。



### 匿名内部类

1. 匿名内部类与局部内部类一样都是在外围类的方法中定义的类，但匿名内部类比局部内部类更深一步，并不需要一个类名

2. 实现接口：

   ```java
   InterfaceType 对象名 = new InterfaceType(){
                               methods and data
                           }
   ```

   **不能有任何参数**

3. 继承类：

   ```java
   ClassType 对象名 = new ClassType(参数){
                               methods and data
                           }
   ```

   当匿名内部类继承一个类时，可以传入参数。



### 静态内部类

1. 语法：

   ```java
   class static 类名{
   	methods and data
   }
   ```

2. 静态内部类不是定义在外围类的方法中

3. 内部类的使用：

   ```
   OuterClass.InnerClass 对象名 = new InnerClass(参数);
   ```

   在内部类不需要访问外围类对象的时候，应该使用静态内部类 。

